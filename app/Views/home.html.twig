{% extends 'Layout/base.html.twig' %}

{% block title %}
    Home
{% endblock %}

{% block head %}
    {{ parent() }}
{% endblock %}

{% block content %}
    <section class="w-full justify-center">
        {% if status %}
            {% verbatim %}
            <div id="popup_message" class="mx-auto">
                <div v-if="popupTriggers.buttonTrigger"
                     class="fixed w-1/3 mx-auto z-10 p-4 bg-white rounded-lg shadow md:p-8">
                    <div class="mb-4 text-sm font-light text-black">
                          <h3 class="mb-3 text-2xl font-bold text-black">
                            Status
                          </h3>
                          <p>
                             {{ message }}
                          </p>
                    </div>
                    <div class="flex justify-end">
                        <button  @click="() => TogglePopup('buttonTrigger')"
                                 class="py-2 px-4 w-full text-sm font-medium text-white justify-end bg-white rounded-lg border border-gray-200 sm:w-auto hover:bg-orange-500 focus:ring-4 focus:outline-none focus:ring-primary-300 hover:text-gray-900 focus:z-10 dark:bg-gray-700">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        {% endverbatim %}

            <script>
                const {createApp, ref} = Vue

                createApp({
                    setup() {
                        const popupTriggers = ref({
                            buttonTrigger: false
                        })

                        const TogglePopup = (trigger) => {
                            popupTriggers.value[trigger] = !popupTriggers.value[trigger]
                        }

                        setTimeout(() => {
                            popupTriggers.value.buttonTrigger = true;
                        }, 500)

                        return {
                            message: {{ message|json_encode|raw }},
                            popupTriggers,
                            TogglePopup
                        }
                    }
                }).mount('#popup_message')
            </script>
        {% endif %}

        <div class="container mx-auto my-10">
            <div class="flex flex-wrap -mx-4">
                {% for section in sections %}
                    <div class="w-full sm:w-1/2 md:w-1/2 xl:w-1/4 p-4">
                        <a href="/{{ section.title|lower }}/{{ section.id }}"
                           class="c-card block bg-white shadow-md hover:shadow-xl rounded-lg overflow-hidden">
                            <div class="relative pb-48 overflow-hidden">
                                <img class="absolute inset-0 h-full w-full object-cover"
                                     src="https://placehold.co/600x400?text=Placeholder"
                                     alt="{{ section.title }}">
                            </div>
                            <div class="p-4">
                                <h2 class="mt-2 mb-2 font-bold">
                                    {{ section.title }}
                                </h2>
                                <p class="text-sm">
                                    {{ section.description }}
                                </p>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}


{% block footer %}
    {{ parent() }}
{% endblock %}